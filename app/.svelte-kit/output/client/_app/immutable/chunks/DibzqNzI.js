import{i,j as l,U as v,ad as g,q as h,ae as S,af as m,ag as p,ah as A}from"./ByK39ISX.js";function b(r){i&&l(r)!==null&&v(r)}let c=!1;function y(){c||(c=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{if(!r.defaultPrevented)for(const e of r.target.elements)e.__on_r?.()})},{capture:!0}))}const N=Symbol("is custom element"),E=Symbol("is html");function k(r){if(i){var e=!1,s=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var a=r.value;f(r,"value",null),r.value=a}if(r.hasAttribute("checked")){var t=r.checked;f(r,"checked",null),r.checked=t}}};r.__on_r=s,h(s),y()}}function R(r,e){var s=_(r);s.value===(s.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function f(r,e,s,a){var t=_(r);i&&(t[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||t[e]!==(t[e]=s)&&(e==="loading"&&(r[S]=s),s==null?r.removeAttribute(e):typeof s!="string"&&O(r).includes(e)?r[e]=s:r.setAttribute(e,s))}function _(r){return r.__attributes??={[N]:r.nodeName.includes("-"),[E]:r.namespaceURI===g}}var u=new Map;function O(r){var e=r.getAttribute("is")||r.nodeName,s=u.get(e);if(s)return s;u.set(e,s=[]);for(var a,t=r,n=Element.prototype;n!==t;){a=p(t);for(var o in a)a[o].set&&s.push(o);t=m(t)}return s}const d="traveller-characters";function I(){const r=localStorage.getItem(d);if(!r)return[];try{return JSON.parse(r)}catch{return[]}}function T(r){localStorage.setItem(d,JSON.stringify(r))}function L(){const{subscribe:r,set:e,update:s}=A(I());return r(a=>{T(a)}),{subscribe:r,add:a=>{s(t=>[...t,a])},update:(a,t)=>{s(n=>n.map(o=>o.id===a?{...o,...t}:o))},remove:a=>{s(t=>t.filter(n=>n.id!==a))},getById:a=>{let t;return r(n=>{t=n.find(o=>o.id===a)})(),t},exportAll:()=>{let a="";return r(t=>{a=JSON.stringify(t,null,2)})(),a},importAll:a=>{try{const t=JSON.parse(a);return Array.isArray(t)?(e(t),!0):!1}catch{return!1}},reset:()=>{e([])}}}const w=L();export{b as a,R as b,w as c,k as r,f as s};
