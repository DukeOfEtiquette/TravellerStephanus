import{d as Ct,c as St,a as h,f}from"../chunks/CHOZcEJC.js";import{a4 as It,G as Pt,a9 as At,aa as Bt,p as Lt,f as qt,a as Et,g as t,ab as Mt,c as l,r as i,ac as Nt,s as e,t as N}from"../chunks/ByK39ISX.js";import{s as rt}from"../chunks/DLyuN9IY.js";import{i as D,s as Ft,a as it}from"../chunks/1lgWkFZx.js";import{e as je,i as De}from"../chunks/BV2Zl_Sa.js";import{r as u,a as H,b as c,c as g}from"../chunks/DibzqNzI.js";import{s as jt}from"../chunks/CRptd-FP.js";function R(d,_,U=!1){if(d.multiple){if(_==null)return;if(!Pt(_))return At();for(var k of d.options)k.selected=_.includes(lt(k));return}for(k of d.options){var F=lt(k);if(Bt(F,_)){k.selected=!0;return}}(!U||_!==void 0)&&(d.selectedIndex=-1)}function He(d){var _=new MutationObserver(()=>{R(d,d.__value)});_.observe(d,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),It(()=>{_.disconnect()})}function lt(d){return"__value"in d?d.__value:d.value}const Dt=()=>{const d=jt;return{page:{subscribe:d.page.subscribe},navigating:{subscribe:d.navigating.subscribe},updated:d.updated}},Ht={subscribe(d){return Dt().page.subscribe(d)}};var Rt=f('<div class="bg-gray-800 rounded-lg p-8 text-center"><p class="text-gray-400 mb-4">Character not found.</p> <a href="/" class="text-amber-400 hover:text-amber-300">Back to Characters</a></div>'),Ut=f('<div><label class="block text-sm text-gray-400 mb-1 text-center"> </label> <input type="number" min="2" max="12" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-center"/></div>'),$t=f('<div class="mt-4 w-24"><label class="block text-sm text-gray-400 mb-1 text-center">PSI</label> <input type="number" min="0" max="12" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white text-center"/></div>'),zt=f('<p class="text-gray-500 text-sm">No careers added yet.</p>'),Gt=f('<div class="flex items-center gap-3 bg-gray-700/50 p-3 rounded"><div class="flex-1"><label class="block text-xs text-gray-400 mb-1">Career</label> <select class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm"><option>Select...</option><option>Military</option><option>Mercantile</option><option>Frontier</option><option>Noble</option><option>Drifter</option><option>Psion</option></select></div> <div class="w-20"><label class="block text-xs text-gray-400 mb-1">Terms</label> <input type="number" min="1" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm text-center"/></div> <div class="w-20"><label class="block text-xs text-gray-400 mb-1">Rank</label> <input type="number" min="0" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm text-center"/></div> <button class="text-red-400 hover:text-red-300 p-1 mt-4" title="Remove career"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div>'),Ot=f('<div class="space-y-3"></div>'),Vt=f('<p class="text-gray-500 text-sm">No skills added yet.</p>'),Wt=f('<div class="flex items-center gap-3 bg-gray-700/50 p-3 rounded"><div class="flex-1"><label class="block text-xs text-gray-400 mb-1">Skill</label> <input type="text" placeholder="Skill name" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm"/></div> <div class="w-16"><label class="block text-xs text-gray-400 mb-1">Rank</label> <input type="number" min="1" max="3" class="w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm text-center"/></div> <button class="text-red-400 hover:text-red-300 p-1 mt-4" title="Remove skill"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div>'),Xt=f('<div class="grid grid-cols-1 sm:grid-cols-2 gap-3"></div>'),Jt=f('<div class="space-y-6"><div class="flex items-center justify-between"><h1 class="text-2xl font-bold text-amber-400"> </h1> <a href="/" class="text-gray-400 hover:text-white">Back to List</a></div> <div class="bg-gray-800 rounded-lg p-6 space-y-6"><section><h2 class="text-lg font-semibold text-amber-400 mb-3">Basic Info</h2> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm text-gray-400 mb-1">Name</label> <input type="text" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div> <div><label class="block text-sm text-gray-400 mb-1">Age</label> <input type="number" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div> <div><label class="block text-sm text-gray-400 mb-1">Homeworld</label> <select class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"><option>Select...</option><option>Agricultural</option><option>Fringe</option><option>Spacer</option><option>Industrial</option><option>High Culture</option></select></div> <div><label class="block text-sm text-gray-400 mb-1">Schooling</label> <select class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"><option>Select...</option><option>The Streets</option><option>Apprenticeship</option><option>Military Academy</option><option>University</option><option>Finishing School</option></select></div></div></section> <section><h2 class="text-lg font-semibold text-amber-400 mb-3">Attributes</h2> <div class="grid grid-cols-3 sm:grid-cols-6 gap-4"></div> <!></section> <section><h2 class="text-lg font-semibold text-amber-400 mb-3">Hit Protection</h2> <div class="grid grid-cols-2 sm:grid-cols-4 gap-4"><div><label class="block text-sm text-gray-400 mb-1">Total</label> <input type="number" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div> <div><label class="block text-sm text-gray-400 mb-1">Current</label> <input type="number" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div> <div><label class="block text-sm text-gray-400 mb-1">Bloodied</label> <input type="number" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div> <div><label class="block text-sm text-gray-400 mb-1">Armor</label> <input type="text" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div></div></section> <section><div class="flex items-center justify-between mb-3"><h2 class="text-lg font-semibold text-amber-400">Careers</h2> <button class="text-sm bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded">Add Career</button></div> <!></section> <section><div class="flex items-center justify-between mb-3"><h2 class="text-lg font-semibold text-amber-400">Expertise</h2> <button class="text-sm bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded">Add Skill</button></div> <!></section> <section><h2 class="text-lg font-semibold text-amber-400 mb-3">Equipment</h2> <div class="grid grid-cols-2 gap-4"><div><label class="block text-sm text-gray-400 mb-1">Cash (Cr)</label> <input type="number" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div> <div><label class="block text-sm text-gray-400 mb-1">Weekly Stipend (Cr)</label> <input type="number" class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white"/></div></div> <div class="mt-4"><label class="block text-sm text-gray-400 mb-1">Weapons (one per line)</label> <textarea class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white h-20"></textarea></div> <div class="mt-4"><label class="block text-sm text-gray-400 mb-1">Gear (one per line)</label> <textarea class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white h-20"></textarea></div> <div class="mt-4"><label class="block text-sm text-gray-400 mb-1">Vehicles (one per line)</label> <textarea class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white h-20"></textarea></div></section> <section><h2 class="text-lg font-semibold text-amber-400 mb-3">Notes</h2> <textarea class="w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white h-32" placeholder="Character notes, backstory, etc."></textarea></section></div></div>');function ra(d,_){Lt(_,!0);const U=()=>it(g,"$characters",F),k=()=>it(Ht,"$page",F),[F,ot]=Ft();let a=Mt(()=>U().find(o=>o.id===k().params.id));function Re(o,s){t(a)&&g.update(t(a).id,{[o]:s})}function Ue(o,s){if(!t(a))return;const p=parseInt(s,10)||0;g.update(t(a).id,{attributes:{...t(a).attributes,[o]:p}})}function $(o,s){t(a)&&g.update(t(a).id,{background:{...t(a).background,[o]:s}})}function j(o,s){t(a)&&g.update(t(a).id,{hitProtection:{...t(a).hitProtection,[o]:s}})}function q(o,s){t(a)&&g.update(t(a).id,{equipment:{...t(a).equipment,[o]:s}})}function st(){t(a)&&g.update(t(a).id,{careers:[...t(a).careers,{name:"",terms:1,rank:0}]})}function z(o,s,p){if(!t(a))return;const B=t(a).careers.map((T,L)=>L===o?{...T,[s]:p}:T);g.update(t(a).id,{careers:B})}function nt(o){t(a)&&g.update(t(a).id,{careers:t(a).careers.filter((s,p)=>p!==o)})}function dt(){t(a)&&g.update(t(a).id,{expertise:[...t(a).expertise,{name:"",rank:1}]})}function $e(o,s,p){if(!t(a))return;const B=t(a).expertise.map((T,L)=>L===o?{...T,[s]:p}:T);g.update(t(a).id,{expertise:B})}function ct(o){t(a)&&g.update(t(a).id,{expertise:t(a).expertise.filter((s,p)=>p!==o)})}var ze=St(),vt=qt(ze);{var ut=o=>{var s=Rt();h(o,s)},pt=o=>{var s=Jt(),p=l(s),B=l(p),T=l(B,!0);i(B),Nt(2),i(p);var L=e(p,2),G=l(L),Ge=e(l(G),2),O=l(Ge),V=e(l(O),2);u(V),V.__change=r=>Re("name",r.currentTarget.value),i(O);var W=e(O,2),X=e(l(W),2);u(X),X.__change=r=>$("age",parseInt(r.currentTarget.value,10)||18),i(W);var J=e(W,2),C=e(l(J),2);C.__change=r=>$("homeworld",r.currentTarget.value);var K=l(C);K.value=K.__value="";var Q=e(K);Q.value=Q.__value="Agricultural";var Y=e(Q);Y.value=Y.__value="Fringe";var Z=e(Y);Z.value=Z.__value="Spacer";var ee=e(Z);ee.value=ee.__value="Industrial";var Oe=e(ee);Oe.value=Oe.__value="High Culture",i(C);var Ve;He(C),i(J);var We=e(J,2),S=e(l(We),2);S.__change=r=>$("schooling",r.currentTarget.value);var te=l(S);te.value=te.__value="";var ae=e(te);ae.value=ae.__value="The Streets";var re=e(ae);re.value=re.__value="Apprenticeship";var ie=e(re);ie.value=ie.__value="Military Academy";var le=e(ie);le.value=le.__value="University";var Xe=e(le);Xe.value=Xe.__value="Finishing School",i(S);var Je;He(S),i(We),i(Ge),i(G);var oe=e(G,2),se=e(l(oe),2);je(se,20,()=>["STR","DEX","END","INT","EDU","SOC"],De,(r,n)=>{var b=Ut(),v=l(b),y=l(v,!0);i(v);var x=e(v,2);u(x),x.__change=w=>Ue(n,w.currentTarget.value),i(b),N(()=>{rt(y,n),c(x,t(a).attributes[n])}),h(r,b)}),i(se);var bt=e(se,2);{var gt=r=>{var n=$t(),b=e(l(n),2);u(b),b.__change=v=>Ue("PSI",v.currentTarget.value),i(n),N(()=>c(b,t(a).attributes.PSI)),h(r,n)};D(bt,r=>{t(a).attributes.PSI!==void 0&&r(gt)})}i(oe);var ne=e(oe,2),Ke=e(l(ne),2),de=l(Ke),ce=e(l(de),2);u(ce),ce.__change=r=>j("total",parseInt(r.currentTarget.value,10)||0),i(de);var ve=e(de,2),ue=e(l(ve),2);u(ue),ue.__change=r=>j("current",parseInt(r.currentTarget.value,10)||0),i(ve);var pe=e(ve,2),be=e(l(pe),2);u(be),be.__change=r=>j("bloodied",parseInt(r.currentTarget.value,10)||0),i(pe);var Qe=e(pe,2),ge=e(l(Qe),2);u(ge),ge.__change=r=>j("armor",r.currentTarget.value),i(Qe),i(Ke),i(ne);var _e=e(ne,2),xe=l(_e),_t=e(l(xe),2);_t.__click=st,i(xe);var xt=e(xe,2);{var mt=r=>{var n=zt();h(r,n)},ht=r=>{var n=Ot();je(n,21,()=>t(a).careers,De,(b,v,y)=>{var x=Gt(),w=l(x),m=e(l(w),2);m.__change=M=>z(y,"name",M.currentTarget.value);var I=l(m);I.value=I.__value="";var P=e(I);P.value=P.__value="Military";var E=e(P);E.value=E.__value="Mercantile";var A=e(E);A.value=A.__value="Frontier";var Le=e(A);Le.value=Le.__value="Noble";var qe=e(Le);qe.value=qe.__value="Drifter";var tt=e(qe);tt.value=tt.__value="Psion",i(m);var at;He(m),i(w);var Ee=e(w,2),Me=e(l(Ee),2);u(Me),Me.__change=M=>z(y,"terms",parseInt(M.currentTarget.value,10)||1),i(Ee);var Ne=e(Ee,2),Fe=e(l(Ne),2);u(Fe),Fe.__change=M=>z(y,"rank",parseInt(M.currentTarget.value,10)||0),i(Ne);var Tt=e(Ne,2);Tt.__click=()=>nt(y),i(x),N(()=>{at!==(at=t(v).name)&&(m.value=(m.__value=t(v).name)??"",R(m,t(v).name)),c(Me,t(v).terms),c(Fe,t(v).rank)}),h(b,x)}),i(n),h(r,n)};D(xt,r=>{t(a).careers.length===0?r(mt):r(ht,!1)})}i(_e);var me=e(_e,2),he=l(me),yt=e(l(he),2);yt.__click=dt,i(he);var ft=e(he,2);{var wt=r=>{var n=Vt();h(r,n)},kt=r=>{var n=Xt();je(n,21,()=>t(a).expertise,De,(b,v,y)=>{var x=Wt(),w=l(x),m=e(l(w),2);u(m),m.__change=A=>$e(y,"name",A.currentTarget.value),i(w);var I=e(w,2),P=e(l(I),2);u(P),P.__change=A=>$e(y,"rank",parseInt(A.currentTarget.value,10)||1),i(I);var E=e(I,2);E.__click=()=>ct(y),i(x),N(()=>{c(m,t(v).name),c(P,t(v).rank)}),h(b,x)}),i(n),h(r,n)};D(ft,r=>{t(a).expertise.length===0?r(wt):r(kt,!1)})}i(me);var ye=e(me,2),fe=e(l(ye),2),we=l(fe),ke=e(l(we),2);u(ke),ke.__change=r=>q("cash",parseInt(r.currentTarget.value,10)||0),i(we);var Ye=e(we,2),Te=e(l(Ye),2);u(Te),Te.__change=r=>q("stipend",parseInt(r.currentTarget.value,10)||0),i(Ye),i(fe);var Ce=e(fe,2),Se=e(l(Ce),2);H(Se),Se.__change=r=>q("weapons",r.currentTarget.value.split(`
`).filter(Boolean)),i(Ce);var Ie=e(Ce,2),Pe=e(l(Ie),2);H(Pe),Pe.__change=r=>q("gear",r.currentTarget.value.split(`
`).filter(Boolean)),i(Ie);var Ze=e(Ie,2),Ae=e(l(Ze),2);H(Ae),Ae.__change=r=>q("vehicles",r.currentTarget.value.split(`
`).filter(Boolean)),i(Ze),i(ye);var et=e(ye,2),Be=e(l(et),2);H(Be),Be.__change=r=>Re("notes",r.currentTarget.value),i(et),i(L),i(s),N((r,n,b)=>{rt(T,t(a).name||"Unnamed Character"),c(V,t(a).name),c(X,t(a).background.age),Ve!==(Ve=t(a).background.homeworld)&&(C.value=(C.__value=t(a).background.homeworld)??"",R(C,t(a).background.homeworld)),Je!==(Je=t(a).background.schooling)&&(S.value=(S.__value=t(a).background.schooling)??"",R(S,t(a).background.schooling)),c(ce,t(a).hitProtection.total),c(ue,t(a).hitProtection.current),c(be,t(a).hitProtection.bloodied),c(ge,t(a).hitProtection.armor),c(ke,t(a).equipment.cash),c(Te,t(a).equipment.stipend),c(Se,r),c(Pe,n),c(Ae,b),c(Be,t(a).notes)},[()=>t(a).equipment.weapons.join(`
`),()=>t(a).equipment.gear.join(`
`),()=>t(a).equipment.vehicles.join(`
`)]),h(o,s)};D(vt,o=>{t(a)?o(pt,!1):o(ut)})}h(d,ze),Et(),ot()}Ct(["change","click"]);export{ra as component};
