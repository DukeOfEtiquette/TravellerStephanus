import{d as V,f as m,a as n,t as I}from"../chunks/CHOZcEJC.js";import{i as W}from"../chunks/DecoqklE.js";import{p as X,f as Z,g as c,c as o,a as tt,s as i,m as et,b as at,r as s,t as L}from"../chunks/ByK39ISX.js";import{s as y}from"../chunks/DLyuN9IY.js";import{i as w,s as rt,a as st}from"../chunks/1lgWkFZx.js";import{e as ot}from"../chunks/BV2Zl_Sa.js";import{c as p,s as it}from"../chunks/DibzqNzI.js";import{b as ct}from"../chunks/CnL8diQ7.js";import{g as nt}from"../chunks/CRptd-FP.js";import{c as lt}from"../chunks/KbOQklKb.js";var dt=m('<button class="text-sm bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded">Export</button>'),vt=m('<div class="bg-gray-800 rounded-lg p-8 text-center"><p class="text-gray-400 mb-4">No characters yet.</p> <button class="bg-amber-600 hover:bg-amber-500 text-white px-4 py-2 rounded">Create Your First Character</button></div>'),pt=m('<div class="bg-gray-800 rounded-lg p-4 flex items-center justify-between"><div><h2 class="text-lg font-semibold text-white"> </h2> <p class="text-sm text-gray-400"><!> </p></div> <div class="flex gap-2"><a class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm">Edit</a> <button class="bg-red-900 hover:bg-red-800 text-white px-3 py-1 rounded text-sm">Delete</button></div></div>'),mt=m('<div class="grid gap-4"></div>'),ft=m('<input type="file" accept=".json" class="hidden"/> <div class="space-y-6"><div class="flex items-center justify-between"><h1 class="text-2xl font-bold text-amber-400">Your Characters</h1> <div class="flex gap-2"><button class="text-sm bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded">Import</button> <!></div></div> <!></div>',1);function jt(F,N){X(N,!1);const g=()=>st(p,"$characters",D),[D,O]=rt();let u=et();function Y(){const t=lt();p.add(t),nt(`/character/${t.id}`)}function B(){const t=p.exportAll(),e=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download="traveller-characters.json",a.click(),URL.revokeObjectURL(r)}function T(t){const e=t.target,r=e.files?.[0];if(!r)return;const a=new FileReader;a.onload=d=>{const v=d.target?.result;p.importAll(v)?alert("Characters imported successfully!"):alert("Failed to import characters. Invalid file format.")},a.readAsText(r),e.value=""}W();var k=ft(),b=Z(k);b.__change=T,ct(b,t=>at(u,t),()=>c(u));var C=i(b,2),h=o(C),j=i(o(h),2),$=o(j);$.__click=()=>c(u).click();var q=i($,2);{var z=t=>{var e=dt();e.__click=B,n(t,e)};w(q,t=>{g().length>0&&t(z)})}s(j),s(h);var G=i(h,2);{var H=t=>{var e=vt(),r=i(o(e),2);r.__click=Y,s(e),n(t,e)},J=t=>{var e=mt();ot(e,5,g,r=>r.id,(r,a)=>{var d=pt(),v=o(d),_=o(v),K=o(_,!0);s(_);var R=i(_,2),U=o(R);{var M=l=>{var f=I();L(x=>y(f,x),[()=>c(a).careers.map(x=>x.name).join(", ")]),n(l,f)},P=l=>{var f=I("No career");n(l,f)};w(U,l=>{c(a).careers.length>0?l(M):l(P,!1)})}var Q=i(U);s(R),s(v);var A=i(v,2),E=o(A),S=i(E,2);S.__click=()=>{confirm("Delete this character?")&&p.remove(c(a).id)},s(A),s(d),L(()=>{y(K,c(a).name||"Unnamed Character"),y(Q,` â€¢ Age ${c(a).background.age??""}`),it(E,"href",`/character/${c(a).id??""}`)}),n(r,d)}),s(e),n(t,e)};w(G,t=>{g().length===0?t(H):t(J,!1)})}s(C),n(F,k),tt(),O()}V(["change","click"]);export{jt as component};
